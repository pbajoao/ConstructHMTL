var Telas={totalDeTelas:0,carregar:function(){var a=$('.container:eq(0)');Telas.totalDeTelas=a.children('.tela').size(),Sumario.criar(a),Glossario.criar(),ComboDeTelas.criar(),SCORMFunctions.scormIsLoaded()&&(doLMSGetValue('cmi.core.entry')!='ab-initio'&&Telas.definirTelaDePartida(a),SCORM.aplicarNomeDoUsuario(),doLMSSetValue('cmi.core.exit','')),Telas.aplicarAcoesBotoes(),Telas.aplicarOuvinteDeProgresso(),setTimeout(function(){Telas.aplicarStatusInicialDosBotoes(a),Telas.aplicarEntradaEmTela(a);},500);},aplicarAcoesBotoes:function(){$('.bt-avancar').on('click',Telas.onAvancar),$('.bt-tocarpausar').on('click',Telas.onTocarPausar),$('.bt-retroceder').on('click',Telas.onRetroceder),$('.bt-recarregar').on('click',Telas.onRecarregar),$('.bt-audio').on('click',Telas.onControlarAudio),$('.combo-pular').on('change',Telas.onPularPorCombo),$(document).on('click','.bt-pular',Telas.onPular),$(document).keydown(function(a){if(a.target.tagName!='INPUT'&&a.target.tagName!='TEXTAREAS'){var b=$('.container:eq(0)');switch(a.keyCode){case 35:a.preventDefault();Telas.pularParaTela(b,Telas.totalDeTelas-1);break;case 36:a.preventDefault();Telas.pularParaTela(b,0);break;case 37:a.preventDefault();Telas.retrocederTela(b);break;case 38:a.preventDefault();Telas.recarregarTela(b);break;case 39:a.preventDefault();Telas.avancarTela(b);break;case 80:var c=$('.principal:eq(0)').children('.controles:eq(0)').children('.bt-tocarpausar:eq(0)');Telas.tocarPausarTela(b,c);break;}}}),$(document).on('click','.bt-box-sair',function(a){Telas.ocultarBoxes(),$(a.target).addClass('fora').removeClass('dentro'),Telas.verificarPausa();});},aplicarEntradaEmTela:function(b){var e=b.children('.tela');var c=Number(b[0].getAttribute('data-tela-atual'));var a=e.eq(c);var d=a.children(':not(.container)').find('audio');d.size()>0&&!a.hasClass('com-audio')&&(a.addClass('sem-audio'),Audios.montarMiniMensagem(a),d.each(function(b){var a=$(this).parent();a[0].style.animationDelay.indexOf('s')!=-1&&a.addClass('delayPadrao');})),Telas.entrarObjetosDaTela(b),a.removeClass('saida').addClass('entrada'),b.hasClass('principal')?(ComboDeTelas.selecionarOpcao(c),Sumario.marcarTelaVisitada(c),$('#sumario').removeClass('visivel'),Telas.aplicarPorcentagemDePaginasVisitadas(),SCORMFunctions.scormIsLoaded()&&(SCORM.registrarNumeroDaTela(c),a.hasClass('finalizarModulo')&&SCORM.registrarModulo())):b.children('.ponteiros').size()>0&&Ponteiros.marcarPonteiro(b);},aplicarOuvinteDeProgresso:function(){$('.barraProgresso span').each(function(a){this.addEventListener('webkitAnimationEnd',Telas.dispararAcaoDeFimDeProgresso,!1),this.addEventListener('animationend',Telas.dispararAcaoDeFimDeProgresso,!1);});},aplicarPorcentagemDePaginasVisitadas:function(){var a=0;SCORM.suspendData.visitadas.indexOf('-')!=-1&&(a=SCORM.suspendData.visitadas.match(/-/g).length-1,a=Math.round(a*100/Telas.totalDeTelas)),$('#porcentagem-modulo').html(a);},aplicarSaidaEmTela:function(a){var b=a.children('.tela');var d=Number(a[0].getAttribute('data-tela-anterior'));var c=b.eq(d);var e=c.find('video');c.hasClass('sem-audio')&&(c.removeClass('sem-audio'),c.find('.delayPadrao').removeClass('delayPadrao')),a.hasClass('principal')&&b.eq(d).hasClass('pausa')&&(b.removeClass('pausa'),a.children('.controles:eq(0)').children('.bt-tocarpausar:eq(0)').removeClass('empausa')),Telas.pausarVideos(e),Telas.ocultarBoxes(),Telas.sairObjetosDaTela(a),a.children('.saida').removeClass('saida'),a.children('.pausa').removeClass('pausa'),b.eq(d).removeClass('entrada').addClass('saida');},aplicarStatusInicialDosBotoes:function(a){a[0].getAttribute('data-tela-atual')==0?a.children('.controles:eq(0)').children('.bt-retroceder:eq(0)').addClass('desabilitado'):a[0].getAttribute('data-tela-atual')==Telas.totalDeTelas-1&&a.children('.controles:eq(0)').children('.bt-avancar:eq(0)').addClass('desabilitado');},avancarTela:function(a){var b=Number(a[0].getAttribute('data-tela-atual'));var c=a.children('.tela');var d=a[0].getAttribute('data-tempo-troca');var f=d?Number(d):750;var e=a.children('.controles:eq(0)').children('.bt-retroceder:eq(0)');var g=a.children('.controles:eq(0)').children('button:last-child');e.hasClass('desabilitado')&&e.removeClass('desabilitado'),b+1<c.size()&&(a[0].setAttribute('data-tela-anterior',b),a[0].setAttribute('data-tela-atual',++b),Telas.aplicarSaidaEmTela(a),setTimeout(function(){Telas.aplicarEntradaEmTela(a),b==c.size()-1&&g.addClass('desabilitado');},f));},definirTelaDePartida:function(b){var a=SCORM.obterUltimaTelaVista();b[0].setAttribute('data-tela-atual',a);},desligarBarraDeProgresso:function(b){var a=b.find('.barraProgresso');a.removeClass('acionada');},destacarBotaoDeAvanco:function(a){var d=a.children('.tela');var e=Number(a[0].getAttribute('data-tela-atual'));var b=d.eq(e);if(b.find('.dialogo').size()>0)Dialogo.habilitarBotoes(b);else{var c=a.children('.controles:eq(0)').children('button:last-child');c.hasClass('desabilitado')||a.hasClass('simulacao')||c.addClass('destacado');}},dispararAcaoDeFimDeProgresso:function(b){var a=$(b.target).closest('.container');a.hasClass('principal')?Telas.destacarBotaoDeAvanco(a):(a[0].getAttribute('data-possui-controles')=='0'?Telas.avancarTela(a):Telas.destacarBotaoDeAvanco(a),Number(a[0].getAttribute('data-tela-atual'))==a.children('.tela').size()-1&&!a.hasClass('simulacao')&&a.parent().parent().children('.barraProgresso:eq(0)').removeClass('pausada').removeClass('progresso-bloqueado'));},dispararInicioDeAudio:function(e){var a=$(e.target);var b=a.closest('.tela');var d=b.parent().children('.barraProgresso:eq(0)');var c=a.children('audio:eq(0)');b.hasClass('entrada')&&!b.hasClass('sem-audio')&&!a.hasClass('fora')&&(d.hasClass('pausada')?c[0].setAttribute('data-status','pausado'):Telas.tocarAudio(c));},entrarBarraDeProgresso:function(a){var d=a.children('.tela');var e=Number(a[0].getAttribute('data-tela-atual'));var b=d.eq(e);var c=a.children('.barraProgresso:eq(0)');var f=$('.principal:eq(0)').hasClass('mudo')||!b.hasClass('com-audio')?'data-tempo-tela-mudo':'data-tempo-tela';var g=Number(b[0].getAttribute(f))/1000+'s';var h=c.children('span:eq(0)');c.addClass('acionada'),h[0].style.animationDuration=g;},entrarObjetosDaTela:function(a){var c=a.children('.tela');var d=Number(a[0].getAttribute('data-tela-atual'));var b=c.eq(d);var e=a.children('.controles:eq(0)').children('button:last-child');var f=a.children('.barraProgresso:eq(0)');b.hasClass('bloquear-progresso')&&f.addClass('progresso-bloqueado'),e.removeClass('destacado'),b.children().each(function(b){var a=this.getAttribute('data-tipo');a&&window[a].entrar(this);}),a.children('.barraProgresso').size()>0&&Telas.entrarBarraDeProgresso(a);},ocultarBoxes:function(){$('.container-wrapper .box').each(function(c){if($(this).hasClass('dentro')){$(this).addClass('fora').removeClass('dentro');var a=$(this).find('video');a.size()>0&&Telas.pausarVideos(a);var b=$(this).find('audio');b.size()>0&&b.each(function(a){Telas.sairAudio($(this));});}});},onAvancar:function(b){var a=$(b.target).closest('.container');Telas.avancarTela(a);},onAvancarDblClick:function(a){a.stopPropagation(),a.preventDefault();var b=$(a.target).closest('.container');Telas.avancarTela(b);},onControlarAudio:function(d){var a=$(d.target);var b=$('.principal:eq(0)').find('audio');var c;b.size()>0&&(a.hasClass('mudo-acionado')?(c=a.closest('.container'),$('.mudo').removeClass('mudo'),b.each(function(a){this.muted=!1;}),a.removeClass('mudo-acionado'),Telas.recarregarTela(c)):($('.principal:eq(0)').addClass('mudo'),b.each(function(b){var a=$(this).parent();a[0].style.animationDelay.indexOf('s')!=-1&&a.addClass('mudo'),this.muted=!0;}),a.addClass('mudo-acionado')));},onTocarPausar:function(a){var b=$(a.target).closest('.container');Telas.tocarPausarTela(b,$(a.target));},onRetroceder:function(b){var a=$(b.target).closest('.container');Telas.retrocederTela(a);},onRecarregar:function(b){var a=$(b.target).closest('.container');Telas.recarregarTela(a);},onPular:function(a){var b=a.target.getAttribute('data-alvo');var d=b?$(b):$(a.target).closest('.container');var e=a.target.getAttribute('data-pulo');var c=a.target.getAttribute('data-callback');Telas.pularParaTela(d,e),c&&Utilidades.executarCallback(c);},onPularPorCombo:function(a){var b=$(a.target).closest('.container');var c=a.target.getElementsByTagName('option')[a.target.selectedIndex].value;Telas.pularParaTela(b,c);},pausarAudio:function(a){a[0].pause();},pausarObjetosDeTela:function(a){var c=a[0].getAttribute('data-tela-atual');var d=a.children('.tela');var b=d.eq(c);a.find('.barraProgresso.acionada').addClass('pausada'),b.find('audio').each(function(a){Telas.pausarAudio($(this));}),b.find('video').each(function(a){this.pause();});},pausarVideos:function(a){a.size()>0&&a.each(function(a){this.pause();});},pularParaTela:function(a,b){var f=a.children('.tela');var g=a[0].getAttribute('data-tela-atual');var c=a[0].getAttribute('data-tempo-troca');var h=c?Number(c):750;var d=a.children('.controles:eq(0)').children('.bt-retroceder:eq(0)');var e=a.children('.controles:eq(0)').children('button:last-child');a[0].setAttribute('data-tela-anterior',g),a[0].setAttribute('data-tela-atual',b),b==0?d.addClass('desabilitado'):d.removeClass('desabilitado'),Telas.aplicarSaidaEmTela(a),setTimeout(function(){Telas.aplicarEntradaEmTela(a),b==f.size()-1?e.addClass('desabilitado'):e.removeClass('desabilitado');},h);},recarregarTela:function(a){var b=a[0].getAttribute('data-tela-atual');var c=a[0].getAttribute('data-tempo-troca');var d=c?Number(c):1000;a[0].setAttribute('data-tela-anterior',b),a[0].setAttribute('data-tela-atual',b),Telas.aplicarSaidaEmTela(a),setTimeout(function(){Telas.aplicarEntradaEmTela(a);},d);},retrocederTela:function(a){var g=a.children('.tela');var b=Number(a[0].getAttribute('data-tela-atual'));var c=a[0].getAttribute('data-tempo-troca');var e=c?Number(c):750;var f=a.children('.controles:eq(0)').children('.bt-retroceder:eq(0)');var d=a.children('.controles:eq(0)').children('button:last-child');b=Number(a[0].getAttribute('data-tela-atual')),d.hasClass('desabilitado')&&d.removeClass('desabilitado'),b-1>=0&&(a[0].setAttribute('data-tela-anterior',b),a[0].setAttribute('data-tela-atual',--b),Telas.aplicarSaidaEmTela(a),setTimeout(function(){Telas.aplicarEntradaEmTela(a),b<=0&&f.addClass('desabilitado');},e));},sairObjetosDaTela:function(a){var c=a.children('.tela');var d=Number(a[0].getAttribute('data-tela-anterior'));var b=c.eq(d);a.find('.pausada').removeClass('pausada'),a.children('.barraProgresso').removeClass('progresso-bloqueado'),b.children().each(function(b){var a=$(this)[0].getAttribute('data-tipo');a&&window[a].sair(this);}),b.find('audio').each(function(a){Telas.sairAudio($(this));}),Telas.desligarBarraDeProgresso(a);},sairAudio:function(a){a[0].setAttribute('data-status',''),a[0].pause(),a[0].currentTime=0;},tocarAudio:function(a){a[0].play();},tocarObjetosDeTela:function(a){var b=a[0].getAttribute('data-tela-atual');var c=a.children('.tela');var d=c.eq(b);a.children('.barraProgresso').removeClass('pausada'),d.find('audio').each(function(a){(this.getAttribute('data-status')=='tocando'||this.getAttribute('data-status')=='pausado')&&Telas.tocarAudio($(this));});},tocarPausarTela:function(a,c){var e=a[0].getAttribute('data-tela-atual');var f=a.children('.tela');var b=f.eq(e);var g=a.children('.barraProgresso:eq(0)');var d=b.children('.container');b.hasClass('pausa')?(b.removeClass('pausa'),c.removeClass('empausa'),Telas.tocarObjetosDeTela(a)):(b.addClass('pausa'),c.addClass('empausa'),Telas.pausarObjetosDeTela(a)),d.size()>0&&d.each(function(a){Telas.tocarPausarTela($(this),c);});},verificarPausa:function(b){var a;if(!b){a=$('.principal:eq(0)');var c=a[0].getAttribute('data-tela-atual');var d=a.children('.tela');var b=d.eq(c);}if(b.hasClass('pausa')){a||(a=$('.principal:eq(0)'));var e=a.children('.controles:eq(0)').children('.bt-tocarpausar:eq(0)');b.removeClass('pausa'),e.removeClass('empausa'),Telas.tocarObjetosDeTela(a);}}};var Subtela={carregar:function(){$('.subtela').each(function(a){Ponteiros.criar($(this));});},entrar:function(b){var a=$(b);var c=Number(b.getAttribute('data-inicio-em'));var d=$('.principal:eq(0)').children('.barraProgresso:eq(0)');var e=a.parent();d.addClass('progresso-bloqueado'),e[0].setAttribute('data-tempo-tela','1000'),a.children('.saida').addClass('saida'),b.getAttribute('data-possui-controles')=='0'&&a.children('.controles').addClass('automatico'),setTimeout(function(){Telas.aplicarEntradaEmTela(a);},c);},sair:function(b){var a=$(b);a.children('.entrada').addClass('saida').removeClass('entrada'),Telas.sairObjetosDaTela(a),b.setAttribute('data-tela-atual','0'),b.setAttribute('data-tela-anterior',''),a.children('.controles:eq(0)').children('.desabilitado').removeClass('desabilitado');}};var NavegacaoExterna={carregar:function(){$('.bloco-navegacao .bt-pular').on('click',NavegacaoExterna.onPular);},entrar:function(a){$(a).find('.visitado').removeClass('visitado');},onPular:function(a){$(a.target).parent().addClass('visitado');},sair:function(a){}};var Simulacao={carregar:function(){Simulacao.aplicarAcoesBotoes();},acionarEtapa:function(a){var b,c,d,e,f;$etapas=a.children('.etapa'),c=Number(a[0].getAttribute('data-etapa')),c<=$etapas.size()-1&&(a.find('.etapa-atual').removeClass('etapa-atual'),b=$etapas.eq(c),f=b[0].getAttribute('data-callback'),f&&Utilidades.executarCallback(f),b.addClass('etapa-atual'),d={left:a[0].posicaoAlvo.left-(b.position().left+b.width()*0.5),top:a[0].posicaoAlvo.top-(b.position().top+b.height()*0.5)},a.css({top:d.top,left:d.left}),e=a.children('.orientacao:eq(0)'),e.addClass('invisivel'),setTimeout(function(){Simulacao.definirOrientacao(e,b);},500),a[0].setAttribute('data-etapa',c+1));},aplicarAcoesBotoes:function(){$('.simulacao .bt-avancar').on('click',Simulacao.onAvancar),$('.simulacao .bt-retroceder').on('click',Simulacao.onRetroceder),$('.simulacao .bt-recarregar').on('click',Simulacao.onRecarregar),$('.simulacao .bt-pular').on('click',Simulacao.onPular),$('.simulacao input.bt-validar').keypress(function(a){$.data(this,'_lastKeyEvent')!='keydown'&&a.keyCode==13&&Simulacao.validarEntradas(a.target),$.data(this,'_lastKeyEvent','keypress');}).keydown(function(a){a.keyCode==13&&Simulacao.validarEntradas(a.target),$.data(this,'_lastKeyEvent','keydown');}),$('.simulacao button.bt-validar').click(function(a){Simulacao.validarEntradas(a.target);}),$('.simulacao input.bt-etapa').keypress(function(a){$.data(this,'_lastKeyEvent')!='keydown'&&a.keyCode==13&&Simulacao.validarInput(a.target),$.data(this,'_lastKeyEvent','keypress');}).keydown(function(a){a.keyCode==13&&Simulacao.validarInput(a.target),$.data(this,'_lastKeyEvent','keydown');}),$('.simulacao button.bt-etapa').click(function(c){var a;if($(this).hasClass('avancar')){var b=$(c.target).closest('.container');Telas.avancarTela(b),setTimeout(function(){a=Simulacao.obterCapsula(b),Simulacao.tratarObjetosDaSimulacao(b),Simulacao.acionarEtapa(a);});}else a=$(c.target).parent(),Simulacao.acionarEtapa(a);});},definirEtapas:function(a){a.find('.etapa').each(function(c){var a=this.getAttribute('data-dimensao').split(',');var b=this.getAttribute('data-posicao').split(',');$(this).css({width:a[0]+'px',height:a[1]+'px',left:b[0]+'px',top:b[1]+'px'});});},definirOrientacao:function(c,a){var d=c.closest('.tela');var b=c[0];b.innerHTML=a[0].getAttribute('data-orientacao'),b.style.maxWidth=(d.width()-a.outerWidth())/2-30+'px',b.style.top=a.position().top+a.outerHeight()/2-c.outerHeight()/2+'px',b.style.left=a.position().left+a.outerWidth()+20+'px',c.removeClass('invisivel').addClass('seta-praesquerda');},entrar:function(e){var a=$(e);var b=Simulacao.obterCapsula(a);var c=$('.principal:eq(0)').children('.barraProgresso:eq(0)');var d=a.parent();c.addClass('progresso-bloqueado'),d[0].setAttribute('data-tempo-tela','1000'),a[0].etapasEstaoPosicionadas===void 0&&(Simulacao.definirEtapas(a),a[0].etapasEstaoPosicionadas=!0),a.children('.entrada').removeClass('entrada'),Telas.aplicarEntradaEmTela(a),Simulacao.acionarEtapa(b);},montarMensagemMultipla:function(b,c,d){var a=$('.container:eq(0)');Telas.verificarPausa(),b.addClass('efeitos mensagem-'+c).children('.rolagem:eq(0)').html(d),Number(a[0].getAttribute('data-tela-atual'))!=Telas.totalDeTelas-1&&a.children('.barraProgresso').removeClass('progresso-bloqueado');},montarMiniMensagem:function(e){var b=e.closest('.tela');var a=b.find('.mini-mensagem:eq(0)');var c,d;a.html()==''&&(c='mensagem-incorreta',d='Dados incorretos. Tente novamente.',a.html(d).addClass(c)),a.addClass('dentro').removeClass('fora'),setTimeout(function(){a.addClass('fora').removeClass('dentro');},500);},obterCapsula:function(c){var d,e,a,b;return d=Number(c[0].getAttribute('data-tela-atual')),e=c.children('.tela'),a=e.eq(d),b=a.children('.capsula:eq(0)'),b[0].setAttribute('data-etapa',0),b[0].posicaoAlvo={left:a.width()*0.5,top:a.height()*0.5},b;},onAvancar:function(c){var a=$(c.target).closest('.container');var b=Simulacao.obterCapsula(a);Simulacao.tratarObjetosDaSimulacao(a),Simulacao.acionarEtapa(b);},onRetroceder:function(c){var a=$(c.target).closest('.container');var b=Simulacao.obterCapsula(a);Simulacao.tratarObjetosDaSimulacao(a),Simulacao.acionarEtapa(b);},onRecarregar:function(c){var a=$(c.target).closest('.container');var b=Simulacao.obterCapsula(a);Simulacao.tratarObjetosDaSimulacao(a),Simulacao.acionarEtapa(b);},onPular:function(c){var a=$(c.target).closest('.container');var b=Simulacao.obterCapsula(a);Simulacao.tratarObjetosDaSimulacao(a),Simulacao.acionarEtapa(b);},sair:function(b){var a=$(b);a.find('.etapa-atual').removeClass('etapa-atual'),a.find('input').val(''),a.find('.capsula').each(function(a){this.setAttribute('data-etapa',0),$(this).children('.visivel').removeClass('visivel');}),b.setAttribute('data-tela-atual','0'),b.setAttribute('data-tela-anterior',''),a.children('.controles:eq(0)').children('.desabilitado').removeClass('desabilitado'),a.children('.saida').removeClass('saida'),a.children('.entrada').removeClass('entrada'),Telas.sairObjetosDaTela(a);},tratarObjetosDaSimulacao:function(b){var c=b.children('.tela');var a=c.eq(Number(b[0].getAttribute('data-tela-atual')));var e=a.children('.mensagem');var d=a.children('.capsula');a.children('.mascara:eq(0)').css('display','none'),a.children('.mensagem:eq(0)').removeClass('efeitos mensagem-incorreta mensagem-correta mensagem-parcial').children(':first').html(''),a.children('.mini-mensagem:eq(0)').addClass('fora').removeClass('dentro'),a.find('input').val(''),d.children('.visivel').removeClass('visivel');},validarEntradas:function(j){var a=$(j).closest('.simulacao');var h=a.find('.mensagem:eq(0)');var b='';var c='Parabéns! Você completou a simulação';var e=100;var g='correta';if(a[0].getAttribute('data-simulacao-tipo')=='avaliativa'){var f=a.find('input[type=text]');var d=0;f.size()>0&&(c='',f.each(function(g){var e=EncodeDecode.obterValorDecodificado(this.getAttribute('data-entradas')).split('|');var a=0;var f;for(valor in e)if(b=b==''?this.value:b+','+this.value,e[valor].toLowerCase()==this.value.toLowerCase()){d++,a=1;break;}f=EncodeDecode.obterValorDecodificado(this.getAttribute('data-retorno-'+a)),c+='<p><span class="retorno-'+a+'"></span><strong>Campo '+(g+1)+':</strong> '+f+'</p>';}),d>0&&d<f.size()&&(g='parcial',e=50));}if(a.find('.mascara').css('display','block'),Simulacao.montarMensagemMultipla(h,g,c),a.hasClass('interacao'))if(SCORMFunctions.scormIsLoaded()){var i=$('.interacao').index(a);SCORM.registrarInteracao('sm',i,'performance',b,e);}else a[0].nota=e,console.log('Não foi possível registrar a simulação. SCORM não corregado.');},validarInput:function(d){function g(){a.hasClass('avancar')?(Telas.avancarTela(b),setTimeout(function(){c=Simulacao.obterCapsula(b),Simulacao.tratarObjetosDaSimulacao(b),Simulacao.acionarEtapa(c);})):(c=a.parent(),Simulacao.acionarEtapa(c));}var a=$(d);var b=a.closest('.container');var c;if(b[0].getAttribute('data-simulacao-tipo')!='avaliativa'){var e=EncodeDecode.obterValorDecodificado(d.getAttribute('data-entradas')).split('|');var f=!1;for(valor in e)if(e[valor].toLowerCase()==d.value.toLowerCase()){f=!0;break;}f?g():Simulacao.montarMiniMensagem(a);}else g();}};var EncodeDecode={obterValorCodificado:function(b){var a=b.split('').map(function(a){return String.fromCharCode(255-(a.charCodeAt(0)-32));});return a.join('');},obterValorDecodificado:function(b){var a=b.split('').map(function(a){return String.fromCharCode(32+(255-a.charCodeAt(0)));});return a.join('');}};var Animacao={carregar:function(){Animacao.aplicarAcoesBotoes();},aplicarAcoesBotoes:function(){$('.animacao').each(function(c){var a=$(this).closest('.container');var b=a.children('.controles').find('.bt-tocarpausar').eq(0);b.on('click',Animacao.onTocarPausarAnimacao);}),$(document).keydown(function(a){if(a.target.tagName!='INPUT'&&a.target.tagName!='TEXTAREAS'&&a.keyCode==80){var b=$('.container:eq(0)');var c=b.children('.tela');var d=Number(b[0].getAttribute('data-tela-atual'));var e=c.eq(d);Animacao.tocarPausarAnimacao(e);}});},acionarEtapaDeTransicao:function(a){var c,d,b;if(b=a[0].posicao,b<=a[0].etapas.length-1){clearInterval(a[0].interv),a[0].tempogasto=0,a[0].interv=setInterval(function(){a.hasClass('transicao-pausada')||(a[0].tempogasto+=100);},100),c=a[0].etapas[b][1];for(d in c)a[0].style[d]=c[d];a[0].posicao=b+1;}},dispararAcaoDeFimDeAtraso:function(b){var a=$(b.target);a.removeClass('atraso'),setTimeout(function(){Animacao.acionarEtapaDeTransicao(a);});},dispararAcaoDeFimDeTransicao:function(a){clearInterval(a.target.interv),a.target.tempogasto=0,a.target.style.transitionDuration='.5s',!$(a.target).hasClass('atraso')&&a.target.posicao<=a.target.etapas.length-1&&(a.target.style.animationDelay=a.target.etapas[a.target.posicao][0],$(a.target).addClass('atraso'));},entrar:function(a){var b;b=$(a),a.etapas===void 0&&(a.etapas=JSON.parse(a.getAttribute('data-etapas'))),a.cssinicial===void 0&&(a.cssinicial=a.style.cssText),a.posicao=0,a.interv=0,a.tempogasto=0,b.removeClass('efeitos'),a.addEventListener('webkitAnimationEnd',Animacao.dispararAcaoDeFimDeAtraso,!1),a.addEventListener('animationend',Animacao.dispararAcaoDeFimDeAtraso,!1),a.addEventListener('webkitTransitionEnd',Animacao.dispararAcaoDeFimDeTransicao,!1),a.addEventListener('transitionend',Animacao.dispararAcaoDeFimDeTransicao,!1),a.style.animationDelay=a.etapas[0][0],b.addClass('atraso');},onTocarPausarAnimacao:function(e){var a=$(e.target).closest('.container');var b=a.children('.tela');var c=Number(a[0].getAttribute('data-tela-atual'));var d=b.eq(c);Animacao.tocarPausarAnimacao(d);},pausarAnimacao:function(a){var d,b,e,c;if(!a.hasClass('atraso')){c=a[0].posicao,posPrev=c>0?c-1:0,d=a[0].etapas[posPrev][1];for(b in d)e=window.getComputedStyle(a[0],null).getPropertyValue(b),a[0].style[b]=e;a.addClass('transicao-pausada');}},sair:function(a){var b=$(a);a.removeEventListener('webkitAnimationEnd',Animacao.dispararAcaoDeFimDeAtraso,!1),a.removeEventListener('animationend',Animacao.dispararAcaoDeFimDeAtraso,!1),a.removeEventListener('webkitTransitionEnd',Animacao.dispararAcaoDeFimDeTransicao,!1),a.removeEventListener('transitionend',Animacao.dispararAcaoDeFimDeTransicao,!1),a.style.cssText=b[0].cssinicial,b.removeClass('transicao-pausada atraso').addClass('efeitos');},tocarAnimacao:function(a){var b,f,c,d,e;if(!a.hasClass('atraso')){e=a[0].posicao,f=e>0?e-1:0,b=500-a[0].tempogasto,b/=1000,b=(b<=0?0.1:b)+'s',a[0].style.transitionDuration=b,a.removeClass('transicao-pausada'),c=a[0].etapas[f][1];for(d in c)a[0].style[d]=c[d];}},tocarPausarAnimacao:function(a){a.find('> .animacao, > div .animacao').each(function(){a.hasClass('pausa')?Animacao.pausarAnimacao($(this)):Animacao.tocarAnimacao($(this));});}};var AnimacaoPorEstilo={carregar:function(){AnimacaoPorEstilo.aplicarAcoesBotoes();},aplicarAcoesBotoes:function(){$('.animacaoPorEstilo').each(function(a){this.addEventListener('animationend',AnimacaoPorEstilo.onFimDeAnimacao,!1),this.addEventListener('webkitAnimationEnd',AnimacaoPorEstilo.onFimDeAnimacao,!1);});},acionarEtapaDeTransicao:function(a){var d,c,b;d=$(a),c=a.getAttribute('data-etapas').split(' '),b=Number(a.getAttribute('data-etapa')),b<=c.length-1&&(d.addClass(c[b]),a.setAttribute('data-etapa',b+1));},entrar:function(a){var b=a.getAttribute('data-etapas');$(a).removeClass(b),a.setAttribute('data-etapa',0),AnimacaoPorEstilo.acionarEtapaDeTransicao(a);},onFimDeAnimacao:function(a){AnimacaoPorEstilo.acionarEtapaDeTransicao(a.target);},sair:function(a){var b=a.getAttribute('data-etapas');$(a).removeClass(b),a.setAttribute('data-etapa',0);}};var Questao={carregar:function(){Questao.aplicarAcoesBotoes();},aplicarAcoesBotoes:function(){$('.bt-responder').on('click',Questao.validar),$('.questao input').on('click',Questao.tratarBotaoResponder),$(document).on('change','.questao select',Questao.tratarBotaoResponder);},desabilitarBotoes:function(){$('.bt-responder').prop('disabled',!0);},entrar:function(b){var a=$(b).closest('.container');Questao.tratarObjetosDaQuestao(a);},montarMensagem:function(f,g){var i=f.closest('.container');var h=f.closest('.tela');var b=h.find('.mensagem:eq(0)');var c;var a;var d;if(Audios.pausarAudioDoEnunciado(h),f.parent().children('.mascara').css('display','block'),isNaN(g)){var e=g.split('|');isNaN(e[1])?c='mensagem-neutra':c=Number(e[1])>0?Number(e[1])<100?'mensagem-parcial':'mensagem-correta':'mensagem-incorreta',a=e[0],d=f.find('input').eq(e[2])[0].getAttribute('data-audio');}else g<=0?(c='mensagem-incorreta',a=b[0].getAttribute('data-retorno-0'),a=EncodeDecode.obterValorDecodificado(a),d=b[0].getAttribute('data-audio-retorno-0')):g>=100?(c='mensagem-correta',a=b[0].getAttribute('data-retorno-1'),a=EncodeDecode.obterValorDecodificado(a),d=b[0].getAttribute('data-audio-retorno-1')):(c='mensagem-parcial',a=b[0].getAttribute('data-retorno-parcial'),a=EncodeDecode.obterValorDecodificado(a),d=b[0].getAttribute('data-audio-retorno-parcial'));d&&Audios.aplicarAudioDeRetorno(b,EncodeDecode.obterValorDecodificado(d)),Telas.verificarPausa(h),b.addClass(c).children('.rolagem').html(a),b.addClass('efeitos'),Number(i[0].getAttribute('data-tela-atual'))!=Telas.totalDeTelas-1&&i.children('.barraProgresso').removeClass('progresso-bloqueado');},sair:function(b){var a=$(b).closest('.tela').children('.mensagem:eq(0)').children('audio:eq(0)');a.size()>0&&a.remove();},tratarObjetosDaQuestao:function(e){var f=e.children('.tela');var b=f.eq(Number(e[0].getAttribute('data-tela-atual')));var a=b.find('.questao:eq(0)');var g=a[0].getAttribute('data-questao-tipo');if(a.size()>0){switch(g){case'unica':case'multipla':case'multiretornos':var c=a.find(':checked');c.size()>0&&c.prop('checked',!1);break;case'verdadeirofalso':var d=a.find('select');d.size()>0&&d.each(function(a){this.selectedIndex=0;});break;case'correspondencia':Correspondencia.montarAlternativas(a);break;}b.children('.mensagem:eq(0)').removeClass('efeitos mensagem-neutra mensagem-correta mensagem-incorreta mensagem-parcial').children('.rolagem:eq(0)').html(''),a.find('.bt-responder:eq(0)')[0].disabled=!0,b.children('.mascara:eq(0)').css('display','none');}},tratarBotaoResponder:function(c){var a=$(c.target).closest('.questao');var d=a.find('.bt-responder:eq(0)');var b;if(c.target.tagName=='INPUT'){var e=a.find('input:checked');b=!e.size()>0;}else if(c.target.tagName=='SELECT'){b=!1;var f=a.find('select');f.each(function(a){return $(this)[0].selectedIndex==0?(b=!0,!1):void 0;});}d[0].disabled=b;},validar:function(q){var a=$(q.target).closest('.questao');var g=a[0].getAttribute('data-questao-tipo');var e,f,d,k,i='',c='',b=0;switch(g){case'unica':case'multipla':d=EncodeDecode.obterValorDecodificado(a[0].getAttribute('data-questao-retorno')).split('|');k=EncodeDecode.obterValorDecodificado(a[0].getAttribute('data-questao-penalidade')).split('|');e=a.find('input');e.each(function(a){$(this).is(':checked')&&(b+=parseInt(d[a])-parseInt(k[a]),c=c==''?a+1:c+','+(a+1));});f=g=='unica'?'un':'mu';break;case'multiretornos':var l;var j;var n;a[0].getAttribute('data-questao-retorno')&&(d=EncodeDecode.obterValorDecodificado(a[0].getAttribute('data-questao-retorno')).split('|'));e=a.find('input');e.each(function(a){return $(this).is(':checked')?(l=EncodeDecode.obterValorDecodificado(this.getAttribute('data-retorno')),n=a,d!==void 0?(b=parseInt(d[a]),c=a+1,j=b):(b=100,c='preenchida',j=c),!1):void 0;});f='mr';break;case'verdadeirofalso':case'correspondencia':e=a.find('select');var o=Math.ceil(100/e.size());var p,h;e.each(function(e){p=$(this).val(),g=='verdadeirofalso'?(d=EncodeDecode.obterValorDecodificado(a[0].getAttribute('data-questao-retorno')).split('|'),f='vf'):(d=a[0].idxRandom,f='co'),h=p==d[e]?1:0,b+=o*h,c=c===''?h:c+','+h;});break;}if(i='choice',b<0&&(b=0),b>100&&(b=100),q.target.disabled=!0,Questao.montarMensagem(a,f=='mr'?l+'|'+j+'|'+n:b),a.hasClass('interacao')){var m=$('.interacao').index(a);SCORMFunctions.scormIsLoaded()?SCORM.registrarInteracao(f,m,i,c,b):(a[0].nota=b,console.log('Não foi possível registrar a interação. SCORM não corregado.'));}}};var Correspondencia={montarAlternativas:function(b){var e=EncodeDecode.obterValorDecodificado(b[0].getAttribute('data-questao-lista')).split('|');var l=EncodeDecode.obterValorDecodificado(b[0].getAttribute('data-questao-opcoes')).split('|');var k='<option value="%indice">%valor</option>';var j='<label><select><option value="">...</option>%opcoes</select><span>%nome</span></label>';var g='';var h='';var i='';var f=[];var d;for(var a=0;a<e.length;a++)h+='<li>'+e[a]+'</li>',g+=k.replace('%indice',a).replace('%valor',a+1),f.push(a);d=Utilidades.randomizar(f);for(var c=0;c<d.length;c++)i+=j.replace('%opcoes',g).replace('%nome',l[d[c]]);b[0].idxRandom=d,b.find('.itens-corresp-ref').html('').append($(h)),b.find('.itens-corresp-lig').html('').append($(i));}};var Lacuna={ponteiro:0,palavras:'',carregar:function(){$('.lacuna cite button').on('click',Lacuna.abrirListaPalavras),$('.bt-concluir-lacuna').on('click',Lacuna.validar);},abrirListaPalavras:function(a){var b=$(a.target).closest('.tela');var c=b.children('.mascara:eq(0)');var d=b.children('.boxLacuna:eq(0)');c.addClass('dentro').removeClass('fora'),d.show().addClass('dentro'),Lacuna.ponteiro=$(a.target).parent().find('button').index($(a.target));},aplicaAcaoBotoes:function(a){a.find('.bt-preencher-lacuna').on('click',Lacuna.preencher);},entrar:function(c){var b=$(c).closest('.tela');var a=$(Lacuna.montarMenuBox(c));var d=b.children('.mini-mensagem:eq(0)');d.removeClass('mensagem-incorreta mensagem-correta').children('span').remove(),b.find('.bt-concluir-lacuna:eq(0)')[0].disabled=!0,b.append(a),a.css({'margin-top':a.height()*0.5*-1+'px','margin-left':a.width()*0.5*-1+'px'}),Lacuna.aplicaAcaoBotoes(a);},limpar:function(a){a.find('cite:eq(0)').find('button').html('').removeClass('preenchida lacuna-correta lacuna-incorreta'),a.find('.bt-concluir-lacuna:eq(0)')[0].disabled=!0;},montarMiniMensagem:function(c,h){var d=c.closest('.container');var e=c.closest('.tela');var a=e.children('.mini-mensagem:eq(0)');var f,g;var b,i;Audios.pausarAudioDoEnunciado(e),b=c[0].getAttribute('data-audios'),b&&(b=EncodeDecode.obterValorDecodificado(b).split(','),i=b[h?0:1],Audios.aplicarAudioDeRetorno(a,i)),a.removeClass('mensagem-incorreta mensagem-correta').children('span').remove(),h?(f='mensagem-correta',g='Correto!',Number(d[0].getAttribute('data-tela-atual'))!=Telas.totalDeTelas-1&&d.children('.barraProgresso').removeClass('progresso-bloqueado')):(f='mensagem-incorreta',g='Incorreto! Tente novamente.',setTimeout(function(){Lacuna.limpar(c);},750)),a.append($('<span>'+g+'</span>')).addClass(f+' dentro').removeClass('fora'),setTimeout(function(){a.addClass('fora').removeClass('dentro');},1000);},montarMenuBox:function(e){var b,a,c,d;a='<div class="boxLacuna efeitos-evento entrada-duracao-250 saida-duracao-250 entrada-transparencia saida-transparencia"><ul class="menu-lacuna">%item%</ul></div>',c='<li><button class="bt-preencher-lacuna">%valor%</button></li>',Lacuna.palavras==''&&(Lacuna.palavras=EncodeDecode.obterValorDecodificado(e.getAttribute('data-lacuna-valores'))),b=Utilidades.randomizar(Lacuna.palavras.split('|'));for(palavra in b)d=c.replace('%valor%',b[palavra]),a=a.replace('%item%',d+'%item%');return a=a.replace('%item%',''),a;},preencher:function(d){var a,b,c,e,f,g;a=$(d.target).closest('.tela'),b=a.find('cite:eq(0)').find('button'),c=d.target.innerText,e=c==Lacuna.palavras.split('|')[Lacuna.ponteiro]?'lacuna-correta':'lacuna-incorreta',b.eq(Lacuna.ponteiro).removeClass('lacuna-correta lacuna-incorreta').addClass('preenchida '+e).html(c),f=a.children('.mascara:eq(0)'),g=a.children('.boxLacuna:eq(0)'),f.addClass('fora').removeClass('dentro'),g.removeClass('dentro').hide(),a.find('.preenchida').size()==b.size()&&(a.find('.bt-concluir-lacuna:eq(0)')[0].disabled=!1);},sair:function(c){var a=$(c).closest('.tela');var d=$(c);var e=a.children('.mascara:eq(0)');var f=a.children('.boxLacuna:eq(0)');var b=a.children('.mini-mensagem:eq(0)').children('audio:eq(0)');b.size()>0&&b.remove(),e.addClass('fora').removeClass('dentro'),f.remove(),Lacuna.limpar(d),Lacuna.ponteiro=0,Lacuna.palavras='';},validar:function(j){var a=$(j.target).closest('.lacuna');var d=a.find('cite:eq(0)').children('button');var h=Lacuna.palavras.split('|');var c=!0;var g='fill-in';var e=100;var i='preenchida';for(var b=0;b<d.size();b++)if(d.eq(b)[0].innerText!=h[b]){c=!1;break;}if(Lacuna.montarMiniMensagem(a,c),a.hasClass('interacao')){var f=$('.interacao').index(a);SCORMFunctions.scormIsLoaded()?SCORM.registrarInteracao('lc',f,g,i,e):(a[0].nota=e,console.log('Não foi possível registrar a interação. SCORM não corregado.'));}}};var Diagnostico={carregar:function(){$('.bt-diagnosticar').on('click',Diagnostico.validar),$('.diagnostico input').on('click',Diagnostico.tratarBotaoResponder);},entrar:function(b){var a=$(b).find('.bt-diagnosticar:eq(0)');a[0].disabled=!0;},montarMensagem:function(e,b,c){var a=c.find('.mensagem:eq(0)');var f=EncodeDecode.obterValorDecodificado(b[0].getAttribute('data-retorno'));var d=b[0].getAttribute('data-audio');Audios.pausarAudioDoEnunciado(c),d&&Audios.aplicarAudioDeRetorno(a,EncodeDecode.obterValorDecodificado(d)),b.parent().children('.mascara').css('display','block'),Telas.verificarPausa(c),a.children('.rolagem').html(f),a.addClass('efeitos mensagem-neutra'),Number(e[0].getAttribute('data-tela-atual'))!=Telas.totalDeTelas-1&&e.children('.barraProgresso').removeClass('progresso-bloqueado');},sair:function(e){var a=$(e).closest('.tela');var b=a.children('.mensagem:eq(0)');var f=a.children('.mascara:eq(0)');var c=$(e).find(':checked');var d=b.children('audio:eq(0)');d.size()>0&&d.remove(),c.size()>0&&c.prop('checked',!1),b.removeClass('efeitos mensagem-neutra').children(':eq(0)').html(''),f.css('display','none');},tratarBotaoResponder:function(e){var a=$(e.target).closest('table');var c=a.find('tr');var d=a.closest('.diagnostico').find('.bt-diagnosticar:eq(0)');var b=!1;c.each(function(c){var a=$(this).find('input:checked');return a.size()==0?(b=!0,!1):void 0;}),d[0].disabled=b;},validar:function(b){var d=$(b.target).closest('.container');var e=$(b.target).closest('.tela');var a=$(b.target).closest('.diagnostico');var f='likert';var c=100;var g='preenchida';if(Diagnostico.montarMensagem(d,a,e),a.hasClass('interacao')){var h=$('.interacao').index(a);SCORMFunctions.scormIsLoaded()?SCORM.registrarInteracao('dg',h,f,g,c):(a[0].nota=c,console.log('Não foi possível registrar a interação. SCORM não corregado.'));}}};var Dialogo={carregar:function(){$(document).on('click','.bt-dialogo',Dialogo.validar),$('.dialogo .bt-abrefecha').on('click',Dialogo.expandirBox);},entrar:function(a){Dialogo.limparMiniMensagem(a),Dialogo.montarBotoes(a);},habilitarBotoes:function(a){var b=a.find('.mascara');b.size()>0&&b.eq(0).css('display','none');var c=a.children('.audioEnunciado');c.size()>0&&setTimeout(function(){Telas.verificarPausa(a),c.eq(0).addClass('efeitos');});},expandirBox:function(c){var a=$(c.target).closest('.dialogo');var b=a[0].getAttribute('data-classe-expansao');a.hasClass(b)?a.removeClass('expandido '+b):a.addClass('expandido '+b);},limparMiniMensagem:function(c){var a=$(c).closest('.tela');var b=a.find('.mini-mensagem:eq(0)');b.removeClass('mensagem-incorreta mensagem-correta').children('span').remove();},montarBotoes:function(i){var e=$(i).closest('.dialogo');var c=EncodeDecode.obterValorDecodificado(e[0].getAttribute('data-lista-acoes')).split('|');var a=[];var b=e[0].getAttribute('data-alvo');var f=c[b];var g='';var j;e.children('.botoes-dialogo').html(''),a.push(f),c.splice(b,1);for(var h=0;h<3;h++)b=Math.floor(Math.random()*(c.length-1)),a.push(c[b]),c.splice(b,1);a=Utilidades.randomizar(a),i.idxAlvo=a.indexOf(f);for(var d=0;d<a.length;d++)j=d==1?'<br class="so-mob"/>':'',g+='<button class="bt bt-dialogo sombra">'+a[d]+'</button>'+j;e.children('.botoes-dialogo:eq(0)').append($(g));},montarMensagem:function(e,a){var b=a.closest('.container');var c=a.find('.mensagem:eq(0)');var f=EncodeDecode.obterValorDecodificado(e[0].getAttribute('data-retorno'));e.parent().children('.mascara').css('display','block'),Telas.verificarPausa(a),c.children('.rolagem').html(f),c.addClass('efeitos mensagem-correta');var d=b.children('.controles:eq(0)').children('button:last-child');d.hasClass('desabilitado')||b.hasClass('simulacao')||d.addClass('destacado');},montarMiniMensagem:function(c,h){var d=c.closest('.container');var e=c.closest('.tela');var a=e.find('.mini-mensagem:eq(0)');var f,g;var b,i;Audios.pausarAudioDoEnunciado(e),b=c[0].getAttribute('data-audios'),b&&(b=EncodeDecode.obterValorDecodificado(b).split(','),i=b[h?0:1],Audios.aplicarAudioDeRetorno(a,i)),a.removeClass('mensagem-incorreta mensagem-correta').children('span').remove(),h?(f='mensagem-correta',g='Correto!',Number(d[0].getAttribute('data-tela-atual'))!=Telas.totalDeTelas-1&&d.children('.barraProgresso').removeClass('progresso-bloqueado')):(f='mensagem-incorreta',g='Incorreto! Tente novamente.'),a.append($('<span>'+g+'</span>')).addClass(f+' dentro').removeClass('fora'),setTimeout(function(){a.addClass('fora').removeClass('dentro');},1000);},sair:function(f){var a=$(f);var e=a.find('button');var b=a.closest('.tela');var c=b.children('.audioEnunciado');var d=b.children('.mini-mensagem:eq(0)').children('audio:eq(0)');d.size()>0&&d.remove(),c.size()>0&&setTimeout(function(){c.eq(0).removeClass('efeitos');}),e.prop('disabled',!1).removeClass('bt-correto bt-incorreto'),a.children('.mascara:eq(0)').css('display','block'),b.children('.mascara:eq(0)').css('display','none');},validar:function(b){var a=$(b.target).closest('.dialogo');var f=a.find('.bt-dialogo').index($(b.target));var c=$(b.target);if(a[0].idxAlvo==f){var j=$(b.target).closest('.container');var i=$(b.target).closest('.tela');var g='performance';var d=100;var h='preenchida';if(c.addClass('bt-correto'),Dialogo.montarMiniMensagem(a,!0),a.hasClass('interacao')){var e=$('.interacao').index(a);SCORMFunctions.scormIsLoaded()?SCORM.registrarInteracao('dl',e,g,h,d):(a[0].nota=d,console.log('Não foi possível registrar a interação. SCORM não corregado.'));}}else c.prop('disabled',!0).addClass('bt-incorreto'),Dialogo.montarMiniMensagem(a,!1);}};var Ponteiros={criar:function(c){var a='';var d=c.children('.tela').size();for(var b=0;b<d;b++)a+='<button class="ponteiro bt-pular" data-pulo="'+b+'"></button>';a='<div class="ponteiros">'+a+'</div>',c.append($(a));},marcarPonteiro:function(b){var a,c;a=b.children('.ponteiros'),setTimeout(function(){c=b[0].getAttribute('data-tela-atual'),a.eq(0).find('.ponteiro-marcado').removeClass('ponteiro-marcado'),a.eq(0).children().eq(c).addClass('ponteiro-marcado');});}};var ComboDeTelas={criar:function(){var c=$('#comboTelas');var b='';for(var a=0;a<Telas.totalDeTelas;a++)b+='<option value="'+a+'">'+(a+1)+'</option>';c.append($(b)),$('#totalDeTelas').html(Telas.totalDeTelas);},selecionarOpcao:function(a){$('#comboTelas')[0].selectedIndex=a;}};var Sumario={criar:function(b){var c=b.children('.tela');var d='<li><button class="bt-pular" data-pulo="%p%">%i%<span></span></button></li>';var a='<ul class="sumario"><li class="tt-sumario">Sumário%s%</li></ul>';var e=/%.[^%]*%/g;c.each(function(e){var j=SCORM.suspendData.visitadas.indexOf('-'+e+'-')==-1?'':' telaVisitada';var f=this.getAttribute('data-grupo');var b,g,h,i,c;f?(g=this.getAttribute('data-grupo-pai'),b='%'+f+'%',h=g?'%'+g+'%':'%s%',i=d.replace('%i%','Tela '+(e+1)).replace('%p%',e).replace('bt-pular','bt-pular'+j),a.indexOf(b)!=-1?c=a.replace(b,i+b):(c=a.replace(h,'<li><button class="tt-grupo bt-grupo"><span class="ico-seta fechado">^</span>'+f+'</button><ul>'+b+'</ul></li>'+h),c=c.replace(b,i+b))):console.log('Tela '+(e+1)+' não contém data-grupo'),a=c;}),a=a.replace(e,''),b.append('<div id="sumario" class="rolagem">'+a+'</div>'),Sumario.aplicarAcoesBotoes();},aplicarAcoesBotoes:function(){$('#sumario .bt-grupo').on('click',function(){$('+ ul',this).slideToggle(250,'swing'),$(this).children().toggleClass('fechado');}),$('#bt-sumario').on('click',function(){$('#sumario').toggleClass('visivel');});},marcarTelaVisitada:function(a){$('#sumario .bt-pular:eq('+a+')').addClass('telaVisitada'),SCORM.suspendData.visitadas.indexOf('-'+a+'-')==-1&&(SCORM.suspendData.visitadas+=a+'-',SCORMFunctions.scormIsLoaded()&&SCORM.registrarTelaVisitada());}};var Glossario={conteudo:'<div id="boxGlossario" class="box efeitos-evento entrada-duracao-500 saida-duracao-500 entrada-porbaixo-elastico saida-porbaixo-elastico"><header>Glossario<button class="bt-ico bt-box-sair">-</button></header><div class="letras">%%letras%%</div>%%termos%%</div>',termos:{},criar:function(){var b=Glossario.conteudo;var h='<button id="letra_%%letra%%" class="letra">%%letra%%</button>';var i='<div id="termos_%%letra%%" class="box-content"><dl>%%termo%%</dl></div>';var j='<dt>%%titulo%%</dt><dd>%%descricao%%</dd>';var f;var g;var d;var a;var e='';var c='';for(letra in Glossario.termos){g=h.replace(/%%letra%%/g,letra),e+=g,a=i.replace('%%letra%%',letra);for(termo in Glossario.termos[letra])d=Glossario.termos[letra][termo],f=j.replace('%%titulo%%',d.titulo).replace('%%descricao%%',d.descricao),a=a.replace('%%termo%%',f+'%%termo%%');a=a.replace('%%termo%%',''),c+=a;}b=b.replace('%%letras%%',e).replace('%%termos%%',c),$('.principal:eq(0)').after($(b)),$('#boxGlossario .letra:eq(0)').addClass('letraAtiva'),$('#boxGlossario .box-content:eq(0)').addClass('boxAtivo'),Glossario.aplicarAcoesBotoes();},aplicarAcoesBotoes:function(){$('#bt-glossario').click(function(a){Telas.ocultarBoxes(),$('#boxGlossario').addClass('dentro').removeClass('fora');}),$('.letra').click(function(b){var a=$(this).attr('id').split('_')[1];$('.boxAtivo').removeClass('boxAtivo'),$('.letraAtiva').removeClass('letraAtiva'),$('#termos_'+a).addClass('boxAtivo'),$(this).addClass('letraAtiva');});}};var Tutorial={url:'',largura:400,conteudo:'<div id="boxTutorial" class="box efeitos-evento entrada-duracao-500 saida-duracao-500 entrada-porbaixo-elastico saida-porbaixo-elastico"><header>Tutorial<button class="bt-ico bt-box-sair">-</button></header><div class="box-content"><video controls><source src="%%url%%" type="video/mp4">Seu navegador não suporta vídeo HTML5.</video></div></div>',criar:function(){var a=Tutorial.conteudo;a=a.replace('%%largura%%',Tutorial.largura),a=a.replace('%%url%%',Tutorial.url),$('.principal:eq(0)').after($(a)),Tutorial.aplicarAcoesBotoes();},aplicarAcoesBotoes:function(){$('#bt-tutorial').on('click',Tutorial.acaoTutorial);},acaoTutorial:function(a){Telas.ocultarBoxes(),$('#boxTutorial').addClass('dentro').removeClass('fora');}};var Relatorio={somaDosResultados:0};var SCORM={suspendData:{visitadas:'-',interacoes:[]},carregar:function(){if(window.self!==window.top||window.opener!==void 0&&window.opener!=null){var a,b=0;$('body').append('<div id="carregandoSCORM"><span></span></div>'),a=setInterval(function(){if(b>=7000)clearInterval(a),SCORMFunctions.status=!1,$('#carregandoSCORM').remove(),alert('Não foi possível carregar os recursos de pontuação do ambiente. Tente novamente mais tarde.');else{var c;SCORMFunctions.scormIsLoaded()?(clearInterval(a),c=doLMSGetValue('cmi.core.lesson_status'),console.log('lesson_status ao carregar o scorm:'+c),c=='not attempted'&&(doLMSSetValue('cmi.core.lesson_status','incomplete'),doLMSSetValue('cmi.core.lesson_location','0')),SCORMFunctions.status=!0,SCORMFunctions.startTimer(),SCORM.carregarSuspendData(),$('#carregandoSCORM').remove(),Carregador.carregar()):SCORMFunctions.status===!1&&(SCORMFunctions.status=null,SCORMFunctions.status=doLMSInitialize());}b+=500;},500);}else Carregador.carregar();},carregarSuspendData:function(){var b;if(doLMSGetValue('cmi.core.entry')!='ab-initio')b=doLMSGetValue('cmi.suspend_data'),b!=''?SCORM.suspendData=JSON.parse(b):console.error('SuspendData não foi previamente armazenado.');else{for(var a=0;a<$('.interacao').size();a++)SCORM.suspendData.interacoes[a]={},doLMSSetValue('cmi.interactions.'+a+'.weighting','0');doLMSSetValue('cmi.suspend_data',JSON.stringify(SCORM.suspendData)),console.log('SuspendData inicial registrado.');}},aplicarNomeDoUsuario:function(){var a=doLMSGetValue('cmi.core.student_name');a.indexOf(',')!=-1&&(a=a.split(','),a=a[1]+' '+a[0]),$('#nome-aluno').html(a);},obterUltimaTelaVista:function(){var a=doLMSGetValue('cmi.core.lesson_location');return a!=''?a:'0';},registrarNumeroDaTela:function(a){doLMSSetValue('cmi.core.lesson_location',a+'');},registrarInteracao:function(f,a,g,e,b){if(doLMSGetValue('cmi.core.lesson_status')=='incomplete'){var c=$('.principal:eq(0)')[0].getAttribute('data-codigo')+'_'+(a+1)+'_'+f;if(SCORM.suspendData.interacoes[a]){var d=SCORM.suspendData.interacoes[a].tent;SCORM.suspendData.interacoes[a].id=c,SCORM.suspendData.interacoes[a].tent=d?d+1:1,SCORM.suspendData.interacoes[a].nota=b;}else console.error('Interações não foram armazenadas previamente');doLMSSetValue('cmi.interactions.'+a+'.student_response',e+''),doLMSSetValue('cmi.interactions.'+a+'.result',b+''),doLMSSetValue('cmi.interactions.'+a+'.id',c),doLMSSetValue('cmi.interactions.'+a+'.type','performance'),console.log('indice:'+a),console.log('tipoInteracao:'+g),console.log('resposta:'+e),console.log('resultado:'+b),console.log(SCORM.suspendData),doLMSSetValue('cmi.suspend_data',JSON.stringify(SCORM.suspendData)),console.log('registrou SuspendData e interação'),SCORM.registrarStatusDeLicaoESaida();}else console.log('Não foi possível registrar a interação. Status da lição: '+doLMSGetValue('cmi.core.lesson_status'));},registrarStatusDeLicaoESaida:function(){if(doLMSGetValue('cmi.core.lesson_status')=='incomplete'){var b=!0;var c;Relatorio.somaDosResultados=0;for(var a=0;a<SCORM.suspendData.interacoes.length;a++)SCORM.suspendData.interacoes[a].nota===void 0?b=!1:Relatorio.somaDosResultados+=SCORM.suspendData.interacoes[a].nota;c=Relatorio.somaDosResultados!=0?Relatorio.somaDosResultados/SCORM.suspendData.interacoes.length:0.01,b?(doLMSSetValue('cmi.core.lesson_status','passed'),doLMSSetValue('cmi.core.exit',''),console.log('Aluno completou o módulo. Pontuação finalizada.')):(console.log('Aluno ainda não completou o módulo. Pontuação parcial registrada.'),doLMSSetValue('cmi.core.exit','suspend')),doLMSSetValue('cmi.core.score.raw',c+''),doLMSCommit(),console.log('score.raw computado: '+c),console.log('registrouLicaoESaida');}else console.log('Aluno já completou o módulo. Pontuação não alterada.');},registrarTelaVisitada:function(){doLMSSetValue('cmi.suspend_data',JSON.stringify(SCORM.suspendData));},registrarModulo:function(){doLMSGetValue('cmi.core.lesson_status')=='incomplete'&&(doLMSSetValue('cmi.core.lesson_status','passed'),doLMSSetValue('cmi.core.score.raw','100'),doLMSSetValue('cmi.core.exit',''),doLMSCommit(),console.log('Módulo completado'));}};var Pagina={carregar:function(){Audios.carregar(),Telas.carregar(),Subtela.carregar(),Simulacao.carregar(),Animacao.carregar(),AnimacaoPorEstilo.carregar(),Questao.carregar(),Lacuna.carregar(),Diagnostico.carregar(),Dialogo.carregar(),NavegacaoExterna.carregar();}};var Audios={carregar:function(){Audios.encontrarAudiosDasTelas();},aplicarAudioDeRetorno:function(b,d){var a;var c=b.children('audio');c.size()>0&&c.remove(),b.append($('<audio><source src="audios/'+d+'.mp3" type="audio/mpeg"></audio>')),a=b.children('audio:eq(0)'),a.addClass('carregado'),a[0].load(),Audios.aplicarEventosDeAudio(a[0]);},aplicarEventosDeAudio:function(a){a.parentNode.addEventListener('webkitAnimationEnd',Telas.dispararInicioDeAudio,!1),a.parentNode.addEventListener('animationend',Telas.dispararInicioDeAudio,!1),a.onplaying=function(a){a.target.setAttribute('data-status','tocando');},a.onended=function(a){a.target.setAttribute('data-status','');};},encontrarAudiosDasTelas:function(){var a=$('.principal:eq(0)').find('audio');a.each(function(a){this.load(),this.oncanplay=function(c){var b=$(c.target);if(!b.hasClass('carregado')){var a=$(c.target).closest('.tela');b.addClass('carregado'),a.children(':not(.container)').find('audio').size()==a.children(':not(.container)').find('.carregado').size()&&a.addClass('com-audio');}},Audios.aplicarEventosDeAudio(this);});},montarMiniMensagem:function(d){var b,c;var a=$('<div class="mini-mensagem efeitos-evento fora entrada-atraso-250 entrada-porcima saida-porcima entrada-duracao-500 saida-duracao-500 saida-atraso-750"></div>');d.append(a),b='mensagem-incorreta',c='Áudios desta tela ainda não foram carregados',a.html(c).addClass(b+' dentro').removeClass('fora'),setTimeout(function(){a.addClass('fora').removeClass('dentro');},1500);},pausarAudioDoEnunciado:function(c){var a=c.children('.audioEnunciado');var b;a.size()>0&&(b=a.eq(0).children('audio:eq(0)'),Telas.sairAudio(b));}};var ResultadoQuiz={questoesComputadas:0,resultado:0,tituloResultado:'',entrar:function(a){ResultadoQuiz.definirPontuacao(),ResultadoQuiz.definirRetorno(a);},definirPontuacao:function(){function b(a){a!==void 0?(ResultadoQuiz.resultado+=a,ResultadoQuiz.questoesComputadas++):ResultadoQuiz.tituloResultado==''&&(ResultadoQuiz.tituloResultado='parcial');}var a;if(SCORMFunctions.scormIsLoaded()){a=SCORM.suspendData.interacoes;for(interacao in a)b(a[interacao].nota);}else a=$('.interacao'),a.each(function(a){b(this.nota);});},definirRetorno:function(f){var d=$('.interacao').size();var c=JSON.parse(f.getAttribute('data-quiz-retornos'));var e=$(f).find('.titulo-quiz:eq(0)');var b='Resultado %ttResult% das questões:';var g=$(f).find('.retorno-quiz:eq(0)');var a='<p>Você respondeu %soma% de %total% questões, atingindo %percent%% da nota do Quiz.</p>';var h=ResultadoQuiz.resultado/(d*100)*100;if(ResultadoQuiz.questoesComputadas!=''){var i;var j;loop1:for(retorno in c){i=c[retorno][0].split('-');for(valor in i)if(h<=i[valor]){j=retorno,achou=!0;break loop1;}}a=a.replace('%soma%',ResultadoQuiz.questoesComputadas),a=a.replace('%total%',d),a=a.replace('%percent%',Math.round(h)),g.addClass('efeitos').html(a+'<p>'+c[j][1]+'</p>'),ResultadoQuiz.tituloResultado==''&&(ResultadoQuiz.tituloResultado='total'),b=b.replace('%ttResult%',ResultadoQuiz.tituloResultado),e.addClass('efeitos').html(b);}else b=b.replace('%ttResult%',''),e.addClass('efeitos').html(b),g.addClass('efeitos').html('Nenhuma questão foi respondida até o momento.');},sair:function(a){ResultadoQuiz.questoesComputadas=0,ResultadoQuiz.resultado=0,ResultadoQuiz.tituloResultado='';}};var Carregador={carregar:function(){Carregador.aplicarAcaoBotao();},aplicarAcaoBotao:function(){$('#mascara-iniciar button').show().on('click',function(){var a=document.getElementById('audioblank');a.load(),a.loop=!0,a.play(),a.pause(),Pagina.carregar(),$('#mascara-iniciar').remove();});}};var Utilidades={executarCallback:function(b){if(b=b.split('|'),b.length>1){var d,f,c,a;d=window[b[0]],a=b[1].split(':'),f=a[0],a.length>1&&(c=a[1]),d&&d[f](c);}else{var e,c,a;a=b[0].split(':'),e=a[0],a.length>1&&(c=a[1]),window[e]&&window[e](c);}},randomizar:function(a){var b=a.length,d,c;while(0!==b)c=Math.floor(Math.random()*b),b-=1,d=a[b],a[b]=a[c],a[c]=d;return a;}};var AutoRolagem={entrar:function(b){var a=$(b).find(b.getAttribute('data-alvo')).eq(0);var c=parseInt(b.getAttribute('data-velocidade'));a.stop().off().scrollTop(0),a.animate({scrollTop:a[0].scrollHeight},c,'linear'),a.hover(function(){$(this).stop();},function(){$(this).animate({scrollTop:$(this)[0].scrollHeight},c,'linear');});},sair:function(a){}};